<section  ng-controller="SessionStep2Controller as step2Controller" ng-init="step2Controller.initController()">
  <section class="global-wrapper" ng-controller='TopicsController as topics'>
    <section id="step-2" class="animated fadeIn" >
      <h3 class="text-center">Topics</h3>

      <div class="row" id='resources-topics' >
        <div class="col-md-12 text-center" ng-show="!topics.list.length" >
          <br><br>
          There is no topics yet
          <div id="create-new-btn" class="btn-standart btn-green" ng-click="topics.openModal('new')">
            Create New Topic&nbsp;<img src="icons/add_new_list_green.png" alt="">
          </div>
        </div>
        <div class="col-md-6" ng-hide="!topics.list.length">
          <h3>Select topic</h3>
          <br>
          <div>
            <div class="flex">
              <div class="check">
                <input id="select-all-topics"  ng-click="step2Controller.selectAllTopics(topics.list)" class="kliiko-checkbox checkbox-btn btn-green"  type="checkbox" ng-checked="step2Controller.allTopicsSelected">
                <label for="select-all-topics" ></label> Select all
              </div>

              <div id="create-new-btn" class="btn-standart btn-green" ng-click="topics.openModal('new')">
                Create New Topic&nbsp;<img src="icons/add_new_list_green.png" alt="">
              </div>
            </div>

            <div id="topics-list" ng-init="step2Controller.orderTopics(topics.list)">
              <div ng-hide="true">{{ step2Controller.topicList = topics.list }}</div>
              <div class="topic-list-item" ng-repeat="t in step2Controller.topicList" ng-drag="step2Controller.canDragElement(t)" ng-drag-data="t" ng-drag-success="step2Controller.topicsOnDropComplete($data, $event)">
                   {{ t.order = $index; "" }}
                <div class="panel-label">
                  <span ng-if="topics.editBlockHelper != $index">
                    <div class="check">
                      <input id="memberSelectet{{ $index }}" class="kliiko-checkbox checkbox-btn btn-green" ng-checked="step2Controller.selectedTopics[t.id]" ng-click="step2Controller.topicSelectClickHandle(t)" type="checkbox" >
                      <label for="memberSelectet{{ $index }}" class="kliiko-checkbox" ></label>
                    </div>
                    {{t.name}}
                  </span>
                  <span ng-if="topics.editBlockHelper == $index">

                    <span class="inline-editor-help">Characters left: {{ topics.nameMaxSize - t.name.length }}</span>
                  </span>
                </div>
                <div class="control-block">

                  <img class="pull-right ic" ng-click="topics.deleteTopic(t.id)" src="/icons/dashboardElement_remove.png" alt="" title="Delete">
                  <img class="pull-right ic" src="/icons/dashboardElement_edit.png" alt="" title="Edit" ng-click="step2Controller.openModal('', t)">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6" ng-hide="!topics.list.length">
          <h3>Chat Session topics</h3>
          <div class="drop-area" ng-drop="true">Drop Selected Topics Here</div>
          </br>
          <div ui-sortable="step2Controller.sortableOptionsA" ng-model="step2Controller.chatSessionTopicsList">
            <div class="topic-list-item" ng-repeat="t in step2Controller.chatSessionTopicsList">

              <div class="panel-label">
                <span>
                  <img src="icons/ic_move.png">
                  {{ t.SessionTopics[0].name }}
                </span>

                <img class="ico-active-unactive" ng-show="t.active" src="/icons/unlocked.png" ng-click="t.active = !t.active; t.update();"  alt="Active" title="Active">
                <img class="ico-active-unactive" ng-show="!t.active" src="/icons/locked.png"  ng-click="t.active = !t.active; t.update()" alt="Not Active" title="Not Active">
              </div>

              <div class="control-block">
                <img class="pull-right ic" ng-click="step2Controller.removeTopicFromList(t.id)" src="/icons/dashboardElement_remove.png" alt="" title="Delete">
                <img class="pull-right ic" src="/icons/dashboardElement_edit.png" alt="" title="Edit" ng-click="step2Controller.openModal('sessionTopic', t)">
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class='modal fade' id='editTopic' role='dialog'>
        <div class='modal-dialog changePasswordModal' style="width: 800px">
          <div class='modal-content border-green border-radius-none'>
            <div class='modal-header'>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h1 class='modal-title text-center'>{{ step2Controller.editTopics.formTitle }}</h1>
            </div>
            <div class='modal-body'>
              <form class='form-horizontal'>
                <div class='row'>
                  <div class='col-xs-12'>
                      <div class='form-group'>
                        <label class='control-label col-md-3 text-no-bold text-login-page' for='editTipicName'>
                          Name:
                        </label>
                        <div class='col-md-4'>
                          <input type='text' class='form-control' id='editTipicName' placeholder='Name' ng-model='step2Controller.editTopics.name' maxlength="15">
                        </div>
                        <div class='col-md-5'>
                          <div id="new-topic-input-help" style="font-size: 20px; float: left; padding-top: 3px;">
                            Characters left: {{ topics.nameMaxSize - step2Controller.editTopics.name.length }}
                          </div>
                        </div>
                      </div>
                      <div class='form-group'>
                        <label class='control-label col-md-3 text-no-bold text-login-page' for='editTipicGreetingMessage'>
                          Greeting Message:
                        </label>
                        <div class='col-md-7'>
                          <textarea type='text' class='form-control' id='editTipicGreetingMessage' placeholder='Greeting Message' ng-model='step2Controller.editTopics.boardMessage' style="resize: none;"></textarea>
                        </div>
                      </div>
                  </div>
                </div>
              </form>
            </div>
            <div class='modal-footer'>
              <div type='button' class='pull-left btn-standart btn-red' data-dismiss='modal'>
                Cancel
              </div>

              <div type='submit' class='pull-right btn-standart btn-green' ng-click="step2Controller.submitEditForm()">
                Update
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <!-- plansModal -->
      <div class='modal fade' id='createNewTopic' role='dialog'>
        <div class='modal-dialog changePasswordModal' style="width: 800px">
          <div class='modal-content border-green border-radius-none'>
            <div class='modal-header'>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h1 class='modal-title text-center'>Create New Topic</h1>
            </div>
            <div class='modal-body'>
              <form ng-submit="topics.submitModalForm()">
                <div class="row">
                  <div class="text-center">
                    <input id="new-topic-input" type="text" maxlength="15"
                           ng-model="topics.topicData.name">
                    <br>
                    <div id="new-topic-input-help">
                      Characters left: {{ topics.nameMaxSize - topics.topicData.name.length }}
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class='modal-footer'>
              <div type='button' class='pull-left btn-standart btn-red'
                   data-dismiss='modal'>
                Cancel
              </div>

              <div type='submit' class='pull-right btn-standart btn-green'
                   ng-click="topics.submitModalForm()">Create
              </div>
            </div>
          </div>
        </div>
      </div>
      <br><br>
    </section>
  </section>
</section>
