apiVersion: v1
kind: Service
metadata:
  name: admin
  labels:
    name: admin
spec:
  ports:
    - port: 80
      targetPort: 8080
      protocol: TCP
  selector:
    name: admin
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: admin
  labels:
    name: admin
spec:
  replicas: 1
  selector:
    matchLabels:
      name: admin
  template:
    metadata:
      labels:
        name: admin
    spec:
      imagePullSecrets:
        - name: docker-hub-secret
      containers:
      - image: "index.docker.io/klzii/kliiko:latest"
        command: ['/bin/sh', './start_server.sh']
        imagePullPolicy: Always
        name: admin
        ports:
          - containerPort: 8080
        env:
        - name: REDIS_HOST
          value: "redis-master"
        - name: NODE_ENV
          value: "production"
        - name: SERVER_CHAT_DOMAIN_URL
          value: "http://chat.test.klzii.com"
        - name: SERVER_CHAT_DOMAIN_PORT
          value: "80"
        - name: REDIS_PORT
          value: "6379"
        - name: DATABASE_NAME_PROD
          value: "klzii_test"
        - name: DATABASE_USER_PROD
          value: "postgres"
        - name: DATABASE_PASSWORD_PROD
          value: "nWD44LS3bYs29JeP"
        - name: DATABASE_HOST_PROD
          value: "104.197.101.137"
        - name: DATABASE_DIALECT_PROD
          value: "postgres"
        - name: AIRBRAKE_PROJECT_ID
          value: "121542"
        - name: AIRBRAKE_API_KEY
          value: "607e87c9e8b7500497bb84c51162b0a8"
        - name: SERVER_BASE_DOMAIN
          value: ".test.klzii.com"
        - name: SERVER_DOMAIN
          value: "www.test.klzii.com"
        - name: MAIL_TRANSPORT_SERVICE
          value: "smtp.mailgun.org"
        - name: MAIL_FROM_EMAIL
          value: "postmaster@noreply.klzii.com"
        - name: MAIL_FROM_NAME
          value: "klzii"
        - name: MAIL_TRANSPORT_AUTH_USER
          value: "postmaster@noreply.klzii.com"
        - name: MAIL_TRANSPORT_AUTH_PASS
          value: "3c005b08f7c42469235456d4da3808da"
        - name: MAIL_TRANSPORT_SECURE_CONNECTION
          value: "false"
        - name: MAIL_TRANSPORT_PORT
          value: "2525"
        - name: SERVER_BASE_SUBDOMAIN
          value: "www"
        - name: FACEBOOK_CLIENT_ID
          value: "1740610496152274"
        - name: FACEBOOK_CLIENT_SECRET
          value: "7d0f78d9fdd0052c20cdf5c2aeda7b33"
        - name: FACEBOOK_CALLBACK_URL
          value: "http://www.test.klzii.com/auth/facebook/callback"
        - name: GOOGLE_CLIENT_ID
          value: "570903251504-hvev7sqcqqvl977djc1kqv722sqgidp3.apps.googleusercontent.com"
        - name: GOOGLE_CLIENT_SECRET
          value: "i_S2xLucKbRL14sp6hHSRVA_"
        - name: GOOGLE_CALLBACK_URL
          value: "http://www.test.klzii.com/auth/google/callback"
        - name: SESSION_COOKIES_NAME
          value: "klzii_test_demo"
        - name: SESSION_SECRET
          value: "e4165b06ff82cd6425100d7403bcd213770a88caab4a68ee50b5d659bbe3a16c26826a2a963d032c822854a7f392e266a843e3731290467b9201e467cb36ea9c"
        - name: COOKIE_SECRET
          value: "eda80b40b4ee5e5c87eee6eefb6a5393c47f6832c740e745292bbd03ca09f4545873765e0fa1190f3e29f67048e3dc17170e70dcc814b695a5408fdd87141998"
        - name: TWILIO_ACCOUNT_SID
          value: "AC07a728c4dd30fcffe94be9cbaf3b579f"
        - name: TWILIO_AUTH_TOKEN
          value: "2d12ce11106c17ab443034bfa86145ce"
        - name: TWILIO_SENDER_NUMBER
          value: "+12048179165"
