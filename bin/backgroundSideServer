#!/usr/bin/env node
"use strict";
const NR = require("node-resque");
const connectionDetails = {
  host:      '127.0.0.1',
  password:  null,
  port:      6379,
  database:  parseInt(process.env.REDIS_DB),
  namespace: 'dashboard_jobs',
  looping: true,
};

const jobs = {
  "subtract": {
    perform: function(a,b,callback){
      var answer = a - b;
      callback(null, answer);
    },
  },
};

var worker = new NR.worker({connection: connectionDetails, queues: ['math', 'otherQueue']}, jobs);
worker.connect(() => {
  console.log(worker);
  worker.workerCleanup(); // optional: cleanup any previous improperly shutdown workers on this host
  worker.start();
});
